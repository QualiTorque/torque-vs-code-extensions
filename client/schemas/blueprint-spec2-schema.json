{
    "$schema": "http://json-schema.org/draft-06/schema#",
    "$ref": "#/definitions/Torque-Blueprint-Spec2",
    "definitions": {
        "Torque-Blueprint-Spec2": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "spec_version": {
                    "type": "integer",
                    "enum": [
                        2
                    ]
                },
                "description": {
                    "type": "string"
                },
                "inputs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/BlueprintInputElement"
                    },
                    "minItems": 1
                },
                "outputs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/BlueprintOutputElement"
                    }
                },
                "grains": {
                    "type": "array",
                    "items": {
                        "anyOf": [
                            {
                                "$ref": "#/definitions/GrainElement"
                            }
                        ]
                    },
                    "title": "Grains",
                    "minItems": 1
                }
            },
            "required": [
                "description",
                "grains",
                "inputs",
                "outputs",
                "spec_version"
            ],
            "title": "Torque Blueprint Spec 2"
        },
        "GrainElement": {
            "type": "object",
            "patternProperties": {
                "^[\\w\\-]+$": { 
                    "$ref": "#/definitions/GrainObject"
                }
            },
            "title": "Blueprint Input"
        },
        "GrainObject": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "kind": {
                    "type": "string",
                    "enum": [
                        "terraform",
                        "helm"
                    ]
                },
                "spec": {
                    "$ref": "#/definitions/GrainSpecObject"
                },
                "depends-on": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            },
            "required": [
                "kind",
                "spec"
            ],
            "title": "Grain Object"
        },
        "GrainSpecObject": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "source": {
                    "$ref": "#/definitions/GrainSpecSourceObject"
                },
                "host": {
                    "type": "string"
                },
                "inputs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/GrainInput"
                    }
                },
                "ouputs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/GrainOutput"
                    }
                }
            },
            "required": [
                "host",
                "inputs",
                "source"
            ],
            "title": "Grain Spec Object"
        },
        "GrainInput": {
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
                "^[\\w\\-]+$": {
                    "type": [
                        "string",
                        "number",
                        "boolean"
                    ]
                }
            },
            "title": "Grain Input"
        },
        "GrainOutput": {
            "type": "string",
            "additionalProperties": true,
            "title": "Grain Output"
        },
        "GrainSpecSourceObject": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "store": {
                    "type": "string"
                },
                "path": {
                    "type": "string"
                }
            },
            "required": [
                "path"
            ],
            "title": "PurpleSource"
        },
        "BlueprintInputElement": {
            "type": "object",
            "patternProperties": {
                "^[\\w\\-]+$": {
                    "$ref": "#/definitions/BlueprintInputObject"
                }
            },
            "title": "Blueprint Input"
        },
        "BlueprintInputObject": {
            "title": "Blueprint Input Object",
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "string",
                        "numeric",
                        "boolean"
                    ]
                },
                "display-style": {
                    "type": "string",
                    "enum": [
                        "multiline",
                        "normal"
                    ],
                    "default": "normal"
                },
                "description": {
                    "type": "string",
                    "description": "In the relevant UI field, enter a description to be displayed to the user."
                },
                "default": {
                    "type": [
                        "integer",
                        "string",
                        "boolean"
                    ]
                }
            }
        },
        "BlueprintOutputElement": {
            "type": "object",
            "patternProperties": {
                "^[\\w\\-]+$": {
                    "$ref": "#/definitions/BlueptintOutputObject"
                }
            },
            "title": "Blueprint Output Element"
        },
        "BlueptintOutputObject": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "value": {
                    "type": "string"
                }
            },
            "required": [
                "value"
            ],
            "title": "Blueptint Output Object"
        }
    }
}